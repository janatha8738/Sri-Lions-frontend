{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/janat/Desktop/Sri-Lions-frontend/app/news/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport Image from \"next/image\";\r\nimport Link from \"next/link\";\r\n\r\ntype NewsItem = {\r\n  _id: string;\r\n  title: string;\r\n  description: string;\r\n  image?: string;\r\n  createdAt?: string;\r\n};\r\n\r\nexport default function NewsPage() {\r\n  const [news, setNews] = useState<NewsItem[]>([]);\r\n  const [page, setPage] = useState(1);\r\n  const [hasMore, setHasMore] = useState(true);\r\n  const [isFetching, setIsFetching] = useState(false);\r\n  const [loadingInitial, setLoadingInitial] = useState(true);\r\n  const loadMoreRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  const API_URL = \"http://localhost:4000/api/content/news\";\r\n\r\n  // Fetch news from backend\r\n  const fetchNews = async (pageNum: number) => {\r\n    try {\r\n      const res = await fetch(`${API_URL}?page=${pageNum}&limit=6`);\r\n      const data = await res.json();\r\n\r\n      if (data.success && data.data) {\r\n        const newItems = data.data;\r\n        if (pageNum === 1) {\r\n          setNews(newItems);\r\n        } else {\r\n          setNews((prev) => [...prev, ...newItems]);\r\n        }\r\n        setHasMore(newItems.length === 6);\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Failed to fetch news:\", err);\r\n    }\r\n  };\r\n\r\n  // Initial load\r\n  useEffect(() => {\r\n    fetchNews(1).finally(() => setLoadingInitial(false));\r\n  }, []);\r\n\r\n  // Infinite scroll\r\n  useEffect(() => {\r\n    if (loadingInitial || !hasMore) return;\r\n\r\n    const observer = new IntersectionObserver(\r\n      (entries) => {\r\n        if (entries[0].isIntersecting && !isFetching && hasMore) {\r\n          setIsFetching(true);\r\n          const nextPage = page + 1;\r\n          fetchNews(nextPage).finally(() => {\r\n            setPage(nextPage);\r\n            setIsFetching(false);\r\n          });\r\n        }\r\n      },\r\n      { threshold: 0.5 }\r\n    );\r\n\r\n    if (loadMoreRef.current) observer.observe(loadMoreRef.current);\r\n    return () => observer.disconnect();\r\n  }, [page, isFetching, hasMore, loadingInitial]);\r\n\r\n  // Animation variants\r\n  const containerVariants = {\r\n    hidden: { opacity: 0 },\r\n    show: {\r\n      opacity: 1,\r\n      transition: { staggerChildren: 0.15 },\r\n    },\r\n  };\r\n\r\n  const itemVariants = {\r\n    hidden: { opacity: 0, y: 40, scale: 0.95 },\r\n    show: { opacity: 1, y: 0, scale: 1, transition: { duration: 0.5 } },\r\n  };\r\n\r\n  if (loadingInitial) {\r\n    return (\r\n      <section className=\"pt-32 sm:pt-40 px-4 sm:px-16 bg-gray-50 dark:bg-[#0a0a0a] min-h-screen flex items-center justify-center\">\r\n        <p className=\"text-2xl text-gray-600 dark:text-gray-400\">Loading news...</p>\r\n      </section>\r\n    );\r\n  }\r\n\r\n  if (news.length === 0) {\r\n    return (\r\n      <section className=\"pt-32 sm:pt-40 px-4 sm:px-16 bg-gray-50 dark:bg-[#0a0a0a] min-h-screen\">\r\n        <div className=\"max-w-7xl mx-auto text-center\">\r\n          <h1 className=\"text-5xl font-extrabold text-gray-900 dark:text-white mb-6\">\r\n            All <span className=\"text-orange-500\">News</span>\r\n          </h1>\r\n          <p className=\"text-2xl text-gray-500\">No news available yet.</p>\r\n          <p className=\"text-gray-400 mt-4\">Add some from Admin Panel!</p>\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <section className=\"pt-32 sm:pt-40 px-4 sm:px-16 bg-gray-50 dark:bg-[#0a0a0a] min-h-screen\">\r\n      <div className=\"max-w-7xl mx-auto text-center mb-16\">\r\n        <h1 className=\"text-5xl font-extrabold text-gray-900 dark:text-white\">\r\n          All <span className=\"text-orange-500\">News</span>\r\n        </h1>\r\n        <p className=\"text-gray-600 dark:text-gray-300 mt-3 text-lg\">\r\n          Explore all our announcements, updates, and club stories.\r\n        </p>\r\n      </div>\r\n\r\n      <motion.div\r\n        className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 max-w-7xl mx-auto\"\r\n        variants={containerVariants}\r\n        initial=\"hidden\"\r\n        animate=\"show\"\r\n      >\r\n        {news.map((item) => (\r\n          <motion.div\r\n            key={item._id}\r\n            variants={itemVariants}\r\n            whileHover={{ scale: 1.05, rotate: 0.5 }}\r\n            className=\"bg-white dark:bg-gray-900 rounded-2xl shadow-lg overflow-hidden cursor-pointer hover:shadow-2xl transition-all duration-300\"\r\n          >\r\n            {/* FIXED: Use item._id instead of item.id */}\r\n            <Link href={`/news/${item._id}`}>\r\n              <div className=\"relative w-full h-60 sm:h-72\">\r\n                {item.image ? (\r\n                  <Image\r\n                    src={item.image}\r\n                    alt={item.title}\r\n                    fill\r\n                    className=\"object-cover\"\r\n                  />\r\n                ) : (\r\n                  <div className=\"bg-gradient-to-br from-orange-400 to-red-600 h-full flex items-center justify-center\">\r\n                    <span className=\"text-white text-4xl font-bold\">NEWS</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"p-6\">\r\n                <h3 className=\"text-2xl font-semibold text-gray-900 dark:text-white mb-3 line-clamp-2\">\r\n                  {item.title}\r\n                </h3>\r\n                <p className=\"text-gray-600 dark:text-gray-300 line-clamp-3\">\r\n                  {item.description}\r\n                </p>\r\n                {item.createdAt && (\r\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-4\">\r\n                    {new Date(item.createdAt).toLocaleDateString(\"en-US\", {\r\n                      year: \"numeric\",\r\n                      month: \"long\",\r\n                      day: \"numeric\",\r\n                    })}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </Link>\r\n          </motion.div>\r\n        ))}\r\n      </motion.div>\r\n\r\n      {/* Load More Trigger */}\r\n      <div ref={loadMoreRef} className=\"h-10 mt-10\" />\r\n\r\n      {/* Loading More */}\r\n      {isFetching && (\r\n        <div className=\"text-center py-10\">\r\n          <motion.p\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            className=\"text-xl text-gray-600 dark:text-gray-400\"\r\n          >\r\n            Loading more news...\r\n          </motion.p>\r\n        </div>\r\n      )}\r\n\r\n      {!hasMore && news.length > 6 && (\r\n        <div className=\"text-center py-10\">\r\n          <p className=\"text-gray-500 text-lg\">You've reached the end!</p>\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}